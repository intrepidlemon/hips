webpackJsonp([1],{"9ZS1":function(t,e){},AXQk:function(t,e){},Mw28:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),a=i("myK/"),s=i.n(a),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=i("VU/8")({name:"App"},o,!1,function(t){i("AXQk")},null,null).exports,c=i("/ocq"),u=i("Gu7T"),l=i.n(u),m=i("0BPL"),f=function(){var t=0;return function(){return 1/(t+=1)}},v=function(){var t=0;return function(){return((t+=1)+1)/(2*t)}},d=function t(e,i,n,a){var s=i.dislocation,o=i.failure,r=i.success,c=n.dislocation,u=n.failure,l=c(),m=u(),f=1-l-m,v=0;return v+=l*s(),v+=m*o(),v+=f*r(),v*=a(),e>0?v+.97*t(e-1,i,n,a):v},h=function(t,e){var i=t,n=function(t){var e=t.years,i=6/(e*(e+1)*(2*e+1));return function(t){return Math.pow(t,2)*i}}({years:e}),a=0;return function(){return i-=t*n(a),a+=1,Math.max(0,i)}},p=function(t){var e=t.success,i=void 0===e?100:e,n=t.dislocation,a=void 0===n?5:n,s=t.failure,o=void 0===s?100:s,r=t.years;return{success:h(i,void 0===r?10:r),dislocation:function(t,e){return function(){return t-e}}(i,a),failure:function(t,e){return function(){return t-e}}(i,o)}},g=function(t){var e=t.years,i=t.percent,n=function(t){var e=t.years,i=6*(1-t.percent)/(e*(e+1)*(2*e+1));return function(t){return Math.pow(t,2)*i}}({years:e,percent:i}),a=n(e),s=0;return function(){return(s+=1)<e?n(s):a}},y=function(t,e,i,n,a,s){var o=i.totalUtils,r=i.hemiUtils,c=n.totalLongetivity,u=n.hemiLongetivity,l=a.totalDislocationRate,h=a.hemiDislocationRate;t=Math.random()>.2?Math.max(function(t){var e=t.mean,i=t.std,n=void 0===i?.5:i;return m.jStat.normal.sample(e,n)}({mean:t,std:e}),1):1;var y,_,x,$=function(t){var e,i=t.total,n=t.hemi;return{total:(e=i,function(){return e}),hemi:function(t){return function(){return t}}(n)}}({total:l,hemi:h}),S=$.total,L=$.hemi,b=(_=(y={total:c,hemi:u}).total,x=y.hemi,{total:g(_),hemi:g(x)}),R=b.total,P=b.hemi,V=function(){return 1},k=function(){return 1};switch(s){case"hyperbolic":V=f(),k=f();break;case"modified-hyperbolic":V=v(),k=v()}return{total:d(t,p(o),{dislocation:S,failure:R},V),hemi:d(t,p(r),{dislocation:L,failure:P},k)}},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slider-field"},[i("div",{staticClass:"slider-field__input"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.inputVal,expression:"inputVal",modifiers:{number:!0}}],attrs:{min:t.min,max:t.max},domProps:{value:t.inputVal},on:{input:function(e){e.target.composing||(t.inputVal=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.inputVal,expression:"inputVal",modifiers:{number:!0}}],staticClass:"slider-field__slider-input",attrs:{type:"range",min:t.min,max:t.max,step:t.step},domProps:{value:t.inputVal},on:{__r:function(e){t.inputVal=t._n(e.target.value)},blur:function(e){t.$forceUpdate()}}})])},staticRenderFns:[]};var x={name:"Parameters",components:{SliderField:i("VU/8")({props:["value","min","max","step"],data:function(){return{inputVal:this.value}},watch:{inputVal:function(t){this.$emit("input",t)},value:function(t){this.inputVal=t}}},_,!1,function(t){i("SLZb")},"data-v-0f1d950b",null).exports},computed:{years:{get:function(){return this.$store.state.parameters.years},set:function(t){this.$store.commit("updateYears",t)}},relativeValueOfHemi:{get:function(){return this.$store.state.parameters.relativeValueOfHemi},set:function(t){this.$store.commit("updateRelativeValueOfHemi",t)}},totalSuccess:{get:function(){return this.$store.state.parameters.totalSuccess},set:function(t){this.$store.commit("updateTotalSuccess",t)}},hemiSuccess:{get:function(){return this.$store.state.parameters.hemiSuccess},set:function(t){this.$store.commit("updateHemiSuccess",t)}},failure:{get:function(){return this.$store.state.parameters.failure},set:function(t){this.$store.commit("updateFailure",t)}},dislocation:{get:function(){return this.$store.state.parameters.dislocation},set:function(t){this.$store.commit("updateDislocation",t)}},totalLongetivityYears:{get:function(){return this.$store.state.parameters.totalLongetivityYears},set:function(t){this.$store.commit("updateTotalLongetivityYears",t)}},totalLongetivityPercent:{get:function(){return this.$store.state.parameters.totalLongetivityPercent},set:function(t){this.$store.commit("updateTotalLongetivityPercent",t)}},hemiLongetivityYears:{get:function(){return this.$store.state.parameters.hemiLongetivityYears},set:function(t){this.$store.commit("updateHemiLongetivityYears",t)}},hemiLongetivityPercent:{get:function(){return this.$store.state.parameters.hemiLongetivityPercent},set:function(t){this.$store.commit("updateHemiLongetivityPercent",t)}},totalDislocationRate:{get:function(){var t=this.$store.state.parameters;return t.totalDislocationRate-t.hemiDislocationRate},set:function(t){var e=this.$store.state.parameters.hemiDislocationRate;this.$store.commit("updateTotalDislocationRate",t+e)}},discount:{get:function(){return this.$store.state.parameters.discount},set:function(t){this.$store.commit("updateDiscount",t)}},clinicalSignificance:{get:function(){return this.$store.state.parameters.clinicalSignificance},set:function(t){this.$store.commit("updateClinicalSignificance",t)}}}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("sui-form",{attrs:{id:"parameters"}},[i("sui-form-field",[i("label",[t._v("expected years left to live")]),t._v(" "),i("slider-field",{attrs:{min:"1",max:"120"},model:{value:t.years,callback:function(e){t.years=e},expression:"years"}})],1),t._v(" "),i("sui-menu",{attrs:{widths:3}},[i("sui-menu-item",{attrs:{active:"none"===t.discount},on:{click:function(e){t.discount="none"}}},[t._v("\n      no discounting\n    ")]),t._v(" "),i("sui-menu-item",{attrs:{active:"hyperbolic"===t.discount},on:{click:function(e){t.discount="hyperbolic"}}},[t._v("\n      hyperbolic\n    ")]),t._v(" "),i("sui-menu-item",{attrs:{active:"modified-hyperbolic"===t.discount},on:{click:function(e){t.discount="modified-hyperbolic"}}},[t._v("\n      modified hyperbolic\n    ")])],1),t._v(" "),i("sui-card",[i("sui-card-content",[i("sui-menu",{attrs:{widths:3}},[i("sui-menu-item",{attrs:{active:100===t.totalSuccess&&100===t.hemiSuccess},on:{click:function(e){t.totalSuccess=100,t.hemiSuccess=100}}},[t._v("\n          standard patient\n        ")]),t._v(" "),i("sui-menu-item",{attrs:{active:100===t.totalSuccess&&90===t.hemiSuccess},on:{click:function(e){t.totalSuccess=100,t.hemiSuccess=90}}},[t._v("\n          high demand patient\n        ")]),t._v(" "),i("sui-menu-item",{attrs:{active:100===t.totalSuccess&&80===t.hemiSuccess},on:{click:function(e){t.totalSuccess=100,t.hemiSuccess=80}}},[t._v("\n          very high demand patient\n        ")])],1),t._v(" "),i("div",{staticClass:"section"},[i("sui-form-field",[i("label",[t._v("total success utility")]),t._v(" "),i("slider-field",{attrs:{min:"0",max:"200"},model:{value:t.totalSuccess,callback:function(e){t.totalSuccess=e},expression:"totalSuccess"}})],1),t._v(" "),i("sui-form-field",[i("label",[t._v("hemi success utility")]),t._v(" "),i("slider-field",{attrs:{min:"0",max:"200"},model:{value:t.hemiSuccess,callback:function(e){t.hemiSuccess=e},expression:"hemiSuccess"}})],1)],1),t._v(" "),i("div",{staticClass:"section"},[i("sui-form-field",[i("label",[t._v("dislocation utility penalty")]),t._v(" "),i("slider-field",{attrs:{min:"0",max:"100"},model:{value:t.dislocation,callback:function(e){t.dislocation=e},expression:"dislocation"}})],1),t._v(" "),i("sui-form-field",[i("label",[t._v("failure utility penalty")]),t._v(" "),i("slider-field",{attrs:{min:"0",max:"100"},model:{value:t.failure,callback:function(e){t.failure=e},expression:"failure"}})],1)],1)],1)],1),t._v(" "),i("sui-card",[i("sui-card-content",[i("div",{staticClass:"section"},[i("sui-form-field",[i("label",[t._v("total longetivity in years")]),t._v(" "),i("slider-field",{attrs:{min:"0",max:"120"},model:{value:t.totalLongetivityYears,callback:function(e){t.totalLongetivityYears=e},expression:"totalLongetivityYears"}})],1),t._v(" "),i("sui-form-field",[i("label",[t._v("hemi longetivity in years")]),t._v(" "),i("slider-field",{attrs:{min:"0",max:"120"},model:{value:t.hemiLongetivityYears,callback:function(e){t.hemiLongetivityYears=e},expression:"hemiLongetivityYears"}})],1)],1),t._v(" "),i("div",{staticClass:"section"},[i("sui-form-field",[i("label",[t._v("total longetivity percent survive")]),t._v(" "),i("slider-field",{attrs:{min:"0",max:"1",step:"0.01"},model:{value:t.totalLongetivityPercent,callback:function(e){t.totalLongetivityPercent=e},expression:"totalLongetivityPercent"}})],1),t._v(" "),i("sui-form-field",[i("label",[t._v("hemi longetivity percent survive")]),t._v(" "),i("slider-field",{attrs:{min:"0",max:"1",step:"0.01"},model:{value:t.hemiLongetivityPercent,callback:function(e){t.hemiLongetivityPercent=e},expression:"hemiLongetivityPercent"}})],1)],1)])],1),t._v(" "),i("sui-form-field",[i("label",[t._v("total dislocation rate above hemi dislocation rate")]),t._v(" "),i("slider-field",{attrs:{min:"0",max:"1",step:"0.01"},model:{value:t.totalDislocationRate,callback:function(e){t.totalDislocationRate=e},expression:"totalDislocationRate"}})],1),t._v(" "),i("sui-form-field",[i("label",[t._v("clinical significance")]),t._v(" "),i("slider-field",{attrs:{min:"0",max:"1",step:"0.01"},model:{value:t.clinicalSignificance,callback:function(e){t.clinicalSignificance=e},expression:"clinicalSignificance"}})],1)],1)},staticRenderFns:[]};var S=i("VU/8")(x,$,!1,function(t){i("sFgo")},"data-v-f5e2b0ce",null).exports,L=function(t){return 0===t.length?null:t.reduce(function(t,e){return t+e},0)/t.length},b=function(t){return Math.min.apply(Math,l()(t))},R=function(t){return Math.max.apply(Math,l()(t))},P={name:"Points",computed:{total:function(){return this.$store.state.results.total},hemi:function(){return this.$store.state.results.hemi},points:function(){return t=this.total,e=this.hemi,i=Math.min(b(t),b(e)),n=Math.max(R(t),R(e)),a=n-i,s=function(t){return(t-i)/a},{min:i,max:n,half:(i+n)/2,total:t.map(s),hemi:e.map(s)};var t,e,i,n,a,s},jitter:function(){return[].concat(l()(Array(this.$store.state.parameters.trials))).map(function(){return Math.random()})}}},V={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{width:"100",height:"100",viewBox:"-2 0 102 101"}},[t._l(t.points.total,function(e,n){return i("circle",{key:e+"-"+n,attrs:{r:"0.3",cx:2+45*t.jitter[n],cy:98-95*e}})}),t._v(" "),t._l(t.points.hemi,function(e,n){return i("circle",{key:e+"-"+n,attrs:{r:"0.3",cx:53+45*t.jitter[n],cy:98-95*e}})})],2)},staticRenderFns:[]};var k={name:"Visualize",components:{Points:i("VU/8")(P,V,!1,function(t){i("logp")},"data-v-4886ef17",null).exports},computed:{total:function(){return this.$store.state.results.total},hemi:function(){return this.$store.state.results.hemi},min:function(){return Math.min(b(this.total),b(this.hemi))},max:function(){return Math.max(R(this.total),R(this.hemi))},half:function(){return(this.max+this.min)/2},averageTotal:function(){return this.$store.getters.averageTotal},averageHemi:function(){return this.$store.getters.averageHemi}}},D={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"visualize"}},[i("div",{staticClass:"y"},[i("div",[t._v(" "+t._s(t.max.toFixed(2))+" ")]),t._v(" "),i("div",[t._v(" "+t._s(t.half.toFixed(2))+" ")]),t._v(" "),i("div",[t._v(" "+t._s(t.min.toFixed(2))+" ")])]),t._v(" "),i("div",{staticClass:"main"},[i("Points"),t._v(" "),i("div",{staticClass:"x"},[null!==t.averageTotal?i("div",[i("strong",[t._v("total")]),t._v(": "+t._s(t.averageTotal.toFixed(2))+" average")]):t._e(),t._v(" "),null!==t.averageTotal?i("div",[i("strong",[t._v("hemi")]),t._v(": "+t._s(t.averageHemi.toFixed(2))+" average")]):t._e()])],1)])},staticRenderFns:[]};var w={name:"Results",components:{Visualize:i("VU/8")(k,D,!1,function(t){i("sTyl")},"data-v-f06a8506",null).exports},methods:{close:function(){this.$store.commit("updateResults",!1)}}},Y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"results"},on:{click:this.close}},[e("div",{staticClass:"interior"},[e("Visualize")],1)])},staticRenderFns:[]};var T={name:"Calculator",components:{Parameters:S,Results:i("VU/8")(w,Y,!1,function(t){i("Mw28")},"data-v-9b10c470",null).exports},computed:{showResults:{get:function(){return this.$store.state.ui.showResults},set:function(t){this.$store.commit("updateResults",t)}}},methods:{single:function(){var t=this.$store.state.parameters,e=t.years,i=t.totalSuccess,n=t.hemiSuccess,a=t.failure,s=t.dislocation,o=t.totalLongetivityYears,r=t.hemiLongetivityYears,c=t.totalLongetivityPercent,u=t.hemiLongetivityPercent,l=t.totalDislocationRate,m=t.hemiDislocationRate,f=t.discount,v=y(e,e/2,{totalUtils:{success:i,failure:a,dislocation:s,years:o},hemiUtils:{success:n,failure:a,dislocation:s,years:r}},{totalLongetivity:{years:o,percent:c},hemiLongetivity:{years:r,percent:u}},{totalDislocationRate:l,hemiDislocationRate:m},f);this.$store.commit("pushTotal",v.total),this.$store.commit("pushHemi",v.hemi)},all:function(){var t=this;this.showResults=!0,this.$store.commit("clear"),[].concat(l()(Array(this.$store.state.parameters.trials))).forEach(function(e,i){return setTimeout(t.single,3*i)})}}},H={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("sui-container",{attrs:{id:"calculator"}},[i("h1",[t._v("Calculator 💃")]),t._v(" "),i("Parameters"),t._v(" "),i("sui-button",{attrs:{primary:""},on:{click:t.all}},[t._v("Calculate")]),t._v(" "),t.showResults?i("Results"):t._e()],1)},staticRenderFns:[]};var C=i("VU/8")(T,H,!1,function(t){i("9ZS1")},"data-v-189c4c00",null).exports;n.default.use(c.a);var F=new c.a({routes:[{path:"/",name:"Calculator",component:C}]}),M=i("NYxO"),U={state:{years:5,relativeValueOfHemi:.5,totalSuccess:100,hemiSuccess:100,failure:100,dislocation:5,totalLongetivityYears:12,totalLongetivityPercent:.8,hemiLongetivityYears:6,hemiLongetivityPercent:.8,hemiDislocationRate:.04,totalDislocationRate:.14,trials:1e3,discount:"none",clinicalSignificance:.05},mutations:{updateYears:function(t,e){t.years=e},updateRelativeValueOfHemi:function(t,e){t.relativeValueOfHemi=e},updateTotalSuccess:function(t,e){t.totalSuccess=e},updateHemiSuccess:function(t,e){t.hemiSuccess=e},updateFailure:function(t,e){t.failure=e},updateDislocation:function(t,e){t.dislocation=e},updateTotalLongetivityYears:function(t,e){t.totalLongetivityYears=e},updateTotalLogetivityPercent:function(t,e){t.totalLongetivityPercent=e},updateHemiLongetivityYears:function(t,e){t.hemiLongetivityYears=e},updateHemiLongetivityPercent:function(t,e){t.hemiLongetivityPercent=e},updateHemiDislocationRate:function(t,e){t.hemiDislocationRate=e},updateTotalDislocationRate:function(t,e){t.totalDislocationRate=e},updateTrials:function(t,e){t.trials=e},updateDiscount:function(t,e){t.discount=e},updateClinicalSignificance:function(t,e){t.clinicalSignificance=e}}},E={state:{total:[],hemi:[]},mutations:{clear:function(t){t.total=[],t.hemi=[]},pushTotal:function(t,e){t.total.push(e)},pushHemi:function(t,e){t.hemi.push(e)}},getters:{averageTotal:function(t){return L(t.total)},averageHemi:function(t){return L(t.hemi)}}},O={state:{showResults:!1},mutations:{updateResults:function(t,e){t.showResults=e}}};n.default.use(M.a);var A=new M.a.Store({modules:{parameters:U,results:E,ui:O},strict:!1});i("kVq8");n.default.config.productionTip=!1,n.default.use(s.a),new n.default({el:"#app",router:F,store:A,components:{App:r},template:"<App/>"})},SLZb:function(t,e){},kVq8:function(t,e){},logp:function(t,e){},sFgo:function(t,e){},sTyl:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.3a49aa2e3923167035df.js.map